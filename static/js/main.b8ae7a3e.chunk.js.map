{"version":3,"sources":["app/service/score.ts","app/pages/predictions.tsx","app/App.tsx","app/reportWebVitals.ts","index.tsx"],"names":["GameResult","PredictionResult","ScoreService","determineResult","prediction","homeScore","split","awayScore","DRAW","HOME_WIN","AWAY_WIN","determinePredictionResult","result","CORRECT_SCORE","CORRECT_RESULT","INCORRECT_RESULT","UNDETERMINED","determinePointsForGame","determinePoints","results","players","map","player","index","score","games","game","predictions","reduce","sum","current","ScoreDisplay","props","scores","className","AllResults","getPredictionClassName","playerName","outerIndex","round","time","teamA","teamB","entry","PredictionsDisplay","sheet","values","slice","row","PredictionsPage","useState","setSheet","localStorage","getItem","token","setToken","loggedIn","setLoggedIn","useEffect","fetch","process","then","ok","removeItem","Error","json","clientId","buttonText","onSuccess","res","setItem","accessToken","onFailure","error","cookiePolicy","scope","App","redirect","sessionStorage","location","href","history","replaceState","basename","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b8ae7a3e.chunk.js","sourcesContent":["interface Game {\n    round: string;\n    time: string;\n    teamA: string;\n    teamB: string;\n    predictions: string[];\n    result: string;\n  }\n  \nexport interface Results {\n    players: string[];\n    games: Game[];\n}\n\nexport interface Score {\n    player: string;\n    score: number;\n}\n\nenum GameResult {\n    HOME_WIN,\n    DRAW,\n    AWAY_WIN\n}\n\nexport enum PredictionResult {\n    CORRECT_SCORE,\n    CORRECT_RESULT,\n    INCORRECT_RESULT,\n    UNDETERMINED\n}\n\nclass ScoreService {\n    determineResult = (prediction: string): GameResult => {\n        const homeScore = prediction.split('-')[0];\n        const awayScore = prediction.split('-')[1];\n        if (homeScore == awayScore) {\n            return GameResult.DRAW;\n        }\n        if (homeScore > awayScore) {\n            return GameResult.HOME_WIN;\n        }\n        return GameResult.AWAY_WIN;\n    }\n\n    determinePredictionResult = (prediction: string, result: string): PredictionResult => {\n        if (!result) {\n            return PredictionResult.UNDETERMINED;\n        }\n        if (prediction == result) {\n            return PredictionResult.CORRECT_SCORE;\n        }\n        if (this.determineResult(prediction) === this.determineResult(result)){\n            return PredictionResult.CORRECT_RESULT;\n        }\n        return PredictionResult.INCORRECT_RESULT;\n    }\n\n    determinePointsForGame = (prediction: string, result: string): number => {\n        const predictionResult = this.determinePredictionResult(prediction, result);\n        switch(predictionResult) {\n            case PredictionResult.CORRECT_SCORE:\n                return 3;\n            case PredictionResult.CORRECT_RESULT:\n                return 1;\n            case PredictionResult.INCORRECT_RESULT:\n            case PredictionResult.UNDETERMINED:\n            default:\n                return 0;\n        }\n    };\n\n    determinePoints = (results: Results): Score[] => {\n        const scores = results.players.map((player, index) => {\n            const score = results.games.map((game) => {\n                const points = this.determinePointsForGame(game.predictions[index], game.result);\n                return points;\n            }).reduce((sum, current) => sum + current, 0);\n            return {\n                player: player,\n                score: score\n            };\n        });\n        return scores;\n    };\n}\n\nexport default ScoreService;","import React, {useEffect, useState} from 'react';\nimport 'app/pages/Pages.css';\nimport { GoogleLogin, GoogleLoginResponse, GoogleLoginResponseOffline } from 'react-google-login';\nimport ScoreService, {PredictionResult, Results, Score} from 'app/service/score';\n\ninterface SheetsResult {\n  values: string[][];\n}\n\ninterface PredictionsProps {\n  sheet: SheetsResult;\n}\n\nconst getResultsFromSheet: (sheet: SheetsResult) => Results = (sheet: SheetsResult) => {\n  const players = sheet.values[0].slice(5);\n  const games = sheet.values.slice(1).map((row) => {\n    const game = {\n      round: row[0],\n      time: row[1],\n      teamA: row[2],\n      teamB: row[3],\n      result: row[4],\n      predictions: row.slice(5),\n    };\n    return game;\n  });\n  return {\n    players: players,\n    games: games\n  }\n};\n\nconst ScoreDisplay = (props: {scores: Score[]}) => {\n  const scores = props.scores;\n  return <table className=\"score-table\">\n      <tbody>\n        <tr>\n          {scores.map((score: Score, index) => {\n            return <td key={index}>{score.player}</td>;\n          })}\n        </tr>\n        <tr>\n          {scores.map((score: Score, index) => {\n              return <td key={index}>{score.score}</td>;\n          })}          \n        </tr>\n      </tbody>\n    </table>\n}\n\nconst AllResults = (props: {results: Results}) => {\n  const results = props.results;\n  const getPredictionClassName = (prediction: string, result: string) => {\n    const scoreService = new ScoreService();\n    const predictionResult = scoreService.determinePredictionResult(prediction, result);\n    switch(predictionResult) {\n      case PredictionResult.CORRECT_SCORE:\n        return \"correct-score\";\n      case PredictionResult.CORRECT_RESULT:\n        return \"correct-result\";\n      case PredictionResult.INCORRECT_RESULT:\n        return \"incorrect-result\";\n      case PredictionResult.UNDETERMINED:\n        return \"\";\n    }\n  }\n\n  return <table className=\"results-table\">\n    <thead>\n      <tr>\n        <th>\n          Round\n        </th>\n        <th>\n          Time\n        </th>\n        <th>\n          Team 1\n        </th>\n        <th>\n          Team 2\n        </th>\n        <th>\n          Score\n        </th>\n        {\n          results.players.map((playerName) => {\n            return <th key={playerName}>{playerName}</th>;\n          })\n        }\n      </tr>\n    </thead>\n    <tbody>\n      {props.results.games.map((game, outerIndex) => {\n        return <tr key={outerIndex}>\n          <td>\n            {game.round}\n          </td>\n          <td>\n            {game.time}\n          </td>\n          <td>\n            {game.teamA}\n          </td>\n          <td>\n            {game.teamB}\n          </td>\n          <td>\n            {game.result}\n          </td>\n          {game.predictions.map((entry, index) => {\n            return <td key={index} className={getPredictionClassName(entry, game.result)}>\n              {entry}\n            </td>;\n          })}\n        </tr>\n      })}\n    </tbody>\n  </table>;\n};\n\nconst PredictionsDisplay = (props: PredictionsProps) => {\n  const results = getResultsFromSheet(props.sheet);\n  const scoreService = new ScoreService();\n  const scores = scoreService.determinePoints(results);\n\n  return <div>\n    <ScoreDisplay scores={scores} />\n    <AllResults results={results} />\n  </div>;\n};\n\nconst PredictionsPage: React.FC = () => {\n  const [sheet, setSheet] = useState<SheetsResult>();\n  const [token, setToken] = useState<string>(localStorage.getItem(\"token\") || \"\");\n  const [loggedIn, setLoggedIn] = useState<boolean>(!!localStorage.getItem(\"token\"));\n\n  const successGoogle = (res: GoogleLoginResponse | GoogleLoginResponseOffline) => {\n    const result = res as GoogleLoginResponse;\n    if (!result) {\n      return;\n    }\n    localStorage.setItem(\"token\", result.accessToken);\n    setToken(result.accessToken);\n    setLoggedIn(true);\n  };\n\n  const logOut = () => {\n    setToken(\"\");\n    setLoggedIn(false);\n    localStorage.removeItem(\"token\");\n  };\n\n  useEffect(() => {\n    if (token) {\n      fetch(`https://sheets.googleapis.com/v4/spreadsheets/${process.env.REACT_APP_SPREADSHEET_ID}/values/Sheet1!A1:K20?access_token=${token}`).then((result) => {\n        if (!result.ok) {\n          logOut();\n          throw Error(\"\");\n        }\n        return result.json();\n      }).then((result) => {\n        setSheet(result);\n      });\n    }\n  }, [token])\n\n  //eslint-disable-next-line\n  const failGoogle = (error: any) => {\n    setLoggedIn(false);\n  };\n  const clientId = `${process.env.REACT_APP_CLIENT_ID}`;\n\n  return (\n    <div className=\"App\">\n      <div>\n        {sheet\n          ? <PredictionsDisplay sheet={sheet} />\n          : null\n        }\n      </div>\n      {\n        !loggedIn\n        ? <GoogleLogin \n        clientId={clientId}\n        buttonText=\"Login\"\n        onSuccess={successGoogle}\n        onFailure={failGoogle}\n        cookiePolicy={'single_host_origin'}\n        scope={\"https://www.googleapis.com/auth/spreadsheets.readonly\"} />\n        : null\n      }\n    </div>\n  );\n}\n\nexport default PredictionsPage;\n","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport PredictionsPage from 'app/pages/predictions';\n\nconst App: React.FC = () => {\n  const redirect = sessionStorage.redirect;\n  delete sessionStorage.redirect;\n  if (redirect && redirect != location.href) {\n    history.replaceState(null, process.env.REACT_APP_BASE_URL || '', redirect);\n  }\n\n  return (\n  <Router basename={process.env.REACT_APP_BASE_URL}>\n    <div>\n      <Switch>\n        <Route path=\"/\">\n          <PredictionsPage />\n        </Route>\n      </Switch>\n    </div>\n  </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals: () => void = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport App from 'app/App';\nimport reportWebVitals from 'app/reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}