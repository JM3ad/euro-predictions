(this["webpackJsonpeuro-predictions"]=this["webpackJsonpeuro-predictions"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c,r,s=n(0),i=n.n(s),o=n(15),a=n.n(o),u=(n(24),n(18)),l=n(2),d=n(9),j=(n(25),n(16)),h=n(17);!function(e){e[e.HOME_WIN=0]="HOME_WIN",e[e.DRAW=1]="DRAW",e[e.AWAY_WIN=2]="AWAY_WIN"}(c||(c={})),function(e){e[e.CORRECT_SCORE=0]="CORRECT_SCORE",e[e.CORRECT_RESULT=1]="CORRECT_RESULT",e[e.INCORRECT_RESULT=2]="INCORRECT_RESULT",e[e.UNDETERMINED=3]="UNDETERMINED"}(r||(r={}));var O=function e(){var t=this;Object(h.a)(this,e),this.determineResult=function(e){var t=e.split("-")[0],n=e.split("-")[1];return t==n?c.DRAW:t>n?c.HOME_WIN:c.AWAY_WIN},this.determinePredictionResult=function(e,n){return n?e==n?r.CORRECT_SCORE:t.determineResult(e)===t.determineResult(n)?r.CORRECT_RESULT:r.INCORRECT_RESULT:r.UNDETERMINED},this.determinePointsForGame=function(e,n){switch(t.determinePredictionResult(e,n)){case r.CORRECT_SCORE:return 3;case r.CORRECT_RESULT:return 1;case r.INCORRECT_RESULT:case r.UNDETERMINED:default:return 0}},this.determinePoints=function(e){return e.players.map((function(n,c){return{player:n,score:e.games.map((function(e){return t.determinePointsForGame(e.predictions[c],e.result)})).reduce((function(e,t){return e+t}),0)}}))}},R=n(1),b=function(e){var t=e.scores;return Object(R.jsx)("table",{className:"score-table",children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)("tr",{children:t.map((function(e,t){return Object(R.jsx)("td",{children:e.player},t)}))}),Object(R.jsx)("tr",{children:t.map((function(e,t){return Object(R.jsx)("td",{children:e.score},t)}))})]})})},E=function(e){var t=e.results,n=function(e,t){switch((new O).determinePredictionResult(e,t)){case r.CORRECT_SCORE:return"correct-score";case r.CORRECT_RESULT:return"correct-result";case r.INCORRECT_RESULT:return"incorrect-result";case r.UNDETERMINED:return""}};return Object(R.jsxs)("table",{className:"results-table",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:"Round"}),Object(R.jsx)("th",{children:"Time"}),Object(R.jsx)("th",{children:"Team 1"}),Object(R.jsx)("th",{children:"Team 2"}),Object(R.jsx)("th",{children:"Score"}),t.players.map((function(e){return Object(R.jsx)("th",{children:e},e)}))]})}),Object(R.jsx)("tbody",{children:e.results.games.map((function(e,t){return Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{children:e.round}),Object(R.jsx)("td",{children:e.time}),Object(R.jsx)("td",{children:e.teamA}),Object(R.jsx)("td",{children:e.teamB}),Object(R.jsx)("td",{children:e.result}),e.predictions.map((function(t,c){return Object(R.jsx)("td",{className:n(t,e.result),children:t},c)}))]},t)}))})]})},m=function(e){var t,n={players:(t=e.sheet).values[0].slice(5),games:t.values.slice(1).map((function(e){return{round:e[0],time:e[1],teamA:e[2],teamB:e[3],result:e[4],predictions:e.slice(5)}}))},c=(new O).determinePoints(n);return Object(R.jsxs)("div",{children:[Object(R.jsx)(b,{scores:c}),Object(R.jsx)(E,{results:n})]})},f=function(){var e=Object(s.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(localStorage.getItem("token")||""),i=Object(d.a)(r,2),o=i[0],a=i[1],u=Object(s.useState)(!!localStorage.getItem("token")),l=Object(d.a)(u,2),h=l[0],O=l[1];Object(s.useEffect)((function(){o&&fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat("1TSSfGF2fWCKnjg1dIV7eUcnQwPlgncJl6WURdyd40pM","/values/Sheet1!A1:K20?access_token=").concat(o)).then((function(e){if(!e.ok)throw a(""),O(!1),localStorage.removeItem("token"),Error("");return e.json()})).then((function(e){c(e)}))}),[o]);var b="".concat("109764536947-mh2j0gmud5sg3dvpko3q9f8tsutr5tks.apps.googleusercontent.com");return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)("div",{children:n?Object(R.jsx)(m,{sheet:n}):null}),h?null:Object(R.jsx)(j.GoogleLogin,{clientId:b,buttonText:"Login",onSuccess:function(e){var t=e;t&&(localStorage.setItem("token",t.accessToken),a(t.accessToken),O(!0))},onFailure:function(e){O(!1)},cookiePolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/spreadsheets.readonly"})]})},p=function(){var e=sessionStorage.redirect;return delete sessionStorage.redirect,e&&e!=location.href&&history.replaceState(null,"euro-predictions",e),Object(R.jsx)(u.a,{basename:"euro-predictions",children:Object(R.jsx)("div",{children:Object(R.jsx)(l.c,{children:Object(R.jsx)(l.a,{path:"/",children:Object(R.jsx)(f,{})})})})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};a.a.render(Object(R.jsx)(i.a.StrictMode,{children:Object(R.jsx)(p,{})}),document.getElementById("root")),C()}},[[32,1,2]]]);
//# sourceMappingURL=main.b8ae7a3e.chunk.js.map